@import "tailwindcss";
@import "./typography.css";
@import "katex/dist/katex.min.css";

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

@font-face {
  font-family: "JPLogo";
  src: url("/fonts/jp-logo.woff2") format("woff2");
  font-weight: 900;
  font-style: normal;
}

@font-face {
  font-family: "en-blog";
  src: url("/fonts/en-blog.woff2") format("woff2");
  font-display: swap;
}

@font-face {
  font-family: "FRLogo";
  src: url("/fonts/fr.woff2") format("woff2");
  font-display: swap;
  font-weight: 400;
}

@font-face {
  font-family: "ZHLogo";
  src: url("/fonts/zh.woff2") format("woff2");
  font-display: swap;
  font-weight: 400;
}

@font-face {
  font-family: "HomeHello";
  src: url("/fonts/home-hello-en.woff2") format("woff2");
  font-weight: 500;
  font-style: normal;
}

@font-face {
  font-family: "suit-font";
  src: url("/fonts/SUIT-Variable.woff2") format("woff2");
  font-display: swap;
}

:root,
html[data-theme="light"] {
  /* Summer Sea Theme */
  --background: #e0f7fa;
  --foreground: #1d3557;
  --accent: #0288d1;
  --muted: #457b9d;
  --border: rgba(29, 53, 87, 0.15);

  --bg-image: radial-gradient(
      circle at 50% 0%,
      rgba(255, 255, 255, 0.6),
      transparent 60%
    ),
    radial-gradient(
      circle at 90% 10%,
      rgba(255, 168, 61, 0.15),
      transparent 40%
    ),
    linear-gradient(180deg, #e0f7fa 0%, #ddf5f0 80%, #e0f7fa 100%);
}

html[data-theme="dark"] {
  /* Haedal Theme */
  --background: #0b1421;
  --foreground: #f6f7fb;
  --accent: #f9a826;
  --muted: rgba(236, 242, 255, 0.75);
  --border: rgba(255, 255, 255, 0.06);

  --bg-image: radial-gradient(
      circle at top,
      rgba(61, 102, 173, 0.25),
      transparent 60%
    ),
    radial-gradient(
      circle at 80% 20%,
      rgba(194, 61, 255, 0.15),
      transparent 55%
    ),
    linear-gradient(165deg, #16233a 0%, #0b1421 60%);
}

html[data-theme="spring"] {
  /* Spring Theme */
  --background: #fff5f7;
  --foreground: #5d4037;
  --accent: #ff8fa3;
  --muted: #bc546e;
  --border: rgba(93, 64, 55, 0.15);

  --bg-image: radial-gradient(
      circle at 10% 20%,
      rgba(255, 183, 178, 0.4),
      transparent 50%
    ),
    radial-gradient(
      circle at 90% 80%,
      rgba(168, 230, 207, 0.4),
      transparent 50%
    ),
    linear-gradient(180deg, #fff5f7 0%, #fff0f5 100%);
}

@custom-variant spring (&:where([data-theme=spring], [data-theme=spring] *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-accent: var(--accent);
  --color-muted: var(--muted);
  --color-border: var(--border);
}

@layer base {
  * {
    @apply border-border outline-accent/75;
    scrollbar-width: auto;
    scrollbar-color: var(--color-muted) transparent;
  }
  html {
    @apply overflow-y-scroll scroll-smooth;
  }
  body {
    @apply flex min-h-svh flex-col bg-background font-mono text-foreground selection:bg-accent/75 selection:text-background;
    background-image: var(--bg-image);
    background-attachment: fixed;
    background-size: cover;
  }
  a,
  button {
    @apply outline-offset-1 outline-accent focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dashed;
  }
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  main {
    @apply mx-auto w-full max-w-app px-4;
  }

  section,
  footer {
    @apply mx-auto max-w-app px-4;
  }
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  .scroll-progress-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 0.25rem;
    z-index: 50;
    background: var(--color-background);
  }
  .scroll-progress-bar {
    width: 0;
    height: 100%;
    background: var(--color-accent);
    transition: width 0.1s linear;
  }
}

@utility max-w-app {
  @apply max-w-3xl;
}

.active-nav {
  @apply underline decoration-wavy decoration-2 underline-offset-4;
}

/* Source: https://piccalil.li/blog/a-more-modern-css-reset/ */
/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 1rem;
}

/* ===== Spring Theme Breadcrumb Decoration ===== */
html[data-theme="spring"] .breadcrumb {
  position: relative;
  padding-top: 2.5rem;
}

html[data-theme="spring"] .breadcrumb::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 120px;
  height: 40px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'%3E%3C!-- Branch --%3E%3Cpath d='M0 25 Q30 20 60 22 T120 18' stroke='%238B6F5C' stroke-width='2' fill='none'/%3E%3Cpath d='M40 22 Q50 15 55 8' stroke='%238B6F5C' stroke-width='1.5' fill='none'/%3E%3Cpath d='M75 20 Q85 12 95 5' stroke='%238B6F5C' stroke-width='1.5' fill='none'/%3E%3C!-- Cherry Blossoms --%3E%3Cg fill='%23FFB7C5'%3E%3Ccircle cx='55' cy='6' r='4'/%3E%3Ccircle cx='52' cy='10' r='3'/%3E%3Ccircle cx='58' cy='11' r='3'/%3E%3Ccircle cx='95' cy='4' r='4'/%3E%3Ccircle cx='91' cy='8' r='3'/%3E%3Ccircle cx='98' cy='9' r='3'/%3E%3Ccircle cx='30' cy='18' r='3.5'/%3E%3Ccircle cx='26' cy='21' r='2.5'/%3E%3Ccircle cx='34' cy='22' r='2.5'/%3E%3C/g%3E%3C!-- Flower Centers --%3E%3Cg fill='%23FFEAA7'%3E%3Ccircle cx='55' cy='6' r='1.5'/%3E%3Ccircle cx='95' cy='4' r='1.5'/%3E%3Ccircle cx='30' cy='18' r='1.2'/%3E%3C/g%3E%3C!-- Falling Petals --%3E%3Cg fill='%23FFB7C5' opacity='0.7'%3E%3Cellipse cx='70' cy='30' rx='3' ry='2' transform='rotate(25 70 30)'/%3E%3Cellipse cx='45' cy='35' rx='2.5' ry='1.5' transform='rotate(-15 45 35)'/%3E%3Cellipse cx='100' cy='28' rx='2' ry='1.5' transform='rotate(40 100 28)'/%3E%3C/g%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-size: contain;
  pointer-events: none;
}
