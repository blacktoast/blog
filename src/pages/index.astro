---
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import Layout from '@/layouts/Layout.astro';

---
<Layout>
	<Header />
		<main> 
			<h1 class="text-3xl font-bold">üßë‚ÄçüöÄ Hello, Astronaut!</h1>
			<p class="flex items-center">
				Hello, this is <span id="blog-title-text" class="px-2 inline-flex items-center gap-1 transition-all duration-500 ease-in-out special-font relative overflow-hidden text-transparent bg-clip-text" />!
			</p>
		</main>
		<Footer />
</Layout>

<style>	
	.special-font {
		font-weight: 900;
	}
	
	.special-font[data-lang="it"] {
		font-family: 'JPLogo', sans-serif;
	}
	
	.special-font[data-lang="ko"] {
		font-family: 'JPLogo', sans-serif;
	}
	
	.special-font[data-lang="ja"] {
		font-family: 'JPLogo-2', 'JPLogo', sans-serif;
		font-weight: normal;
	}
	
	.special-font[data-lang="zh"] {
		font-family: 'JPLogo-2', 'JPLogo', sans-serif;
		font-weight: normal;
	}
	
	.special-font[data-lang="fr"] {
		font-family: 'JPLogo', sans-serif;
	}
	
	#blog-title-text {
		display: inline-flex;
		align-items: center;
		gap: 0.2rem;
		padding-inline: 0.4rem;
		letter-spacing: -0.02em;
		background-image:
			radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.85), transparent 42%),
			radial-gradient(circle at 80% 0%, rgba(224, 247, 250, 0.6), transparent 45%),
			conic-gradient(from 180deg at 50% 50%, #5efce8, #736efe, #ff5f6d, #ffc371, #5efce8);
		background-size: 180% 180%;
		color: transparent;
		-webkit-text-fill-color: transparent;
		-webkit-background-clip: text;
		background-clip: text;
		
		filter: drop-shadow(0 18px 28px rgba(196, 219, 229, 0.35));
		will-change: transform, opacity, background-position;
		animation: prismShift 9s ease-in-out infinite alternate;
	}

	#blog-title-text::after {
		content: '';
		position: absolute;
		inset: 25% auto auto 12%;
		width: 68%;
		height: 35%;
		border-radius: 9999px;
		/* background: rgba(255, 255, 255, 0.55); */
		filter: blur(18px);
		opacity: 0.8;
		pointer-events: none;
		mix-blend-mode: screen;
		animation: sparklePulse 4s ease-in-out infinite alternate;
	}

	@media (prefers-color-scheme: dark) {
		#blog-title-text {
			background-image:
				radial-gradient(circle at 5% 15%, rgba(56, 189, 248, 0.45), transparent 48%),
				radial-gradient(circle at 88% 5%, rgba(161, 98, 255, 0.5), transparent 42%),
				conic-gradient(from 200deg at 50% 50%, #0ff0b3, #0367d3, #8d4efc, #ff7eb6, #0ff0b3);
			/* text-shadow: 0 12px 18px rgba(15, 23, 42, 0.65); */
			/* filter: drop-shadow(0 18px 28px rgba(16, 185, 129, 0.45)); */
		}

	
	}

	@keyframes prismShift {
		0% {
			background-position: 0% 50%;
		}
		50% {
			background-position: 100% 50%;
		}
		100% {
			background-position: 0% 50%;
		}
	}

	@keyframes sparklePulse {
		0% {
			opacity: 0.45;
			transform: translateY(0) scaleX(0.85);
		}
		100% {
			opacity: 0.95;
			transform: translateY(-15%) scaleX(1.15);
		}
	}
</style>

<script is:inline data-astro-rerun>
	(function() {
		const titles = [
		  { text: 'Î†àÎòêÏùò Î∏îÎ°úÍ∑∏ üá∞üá∑', lang: 'ko' },      // ÌïúÍµ≠Ïñ¥
			{ text: "Retto's blog üá∫üá∏", lang: 'en' },    // ÏòÅÏñ¥
			{ text: '„É©„ÉÉ„Ç≥„ÅÆ„Éñ„É≠„Ç∞ üáØüáµ', lang: 'ja' },    // ÏùºÎ≥∏Ïñ¥
			{ text: 'Êµ∑Áç∫ÁöÑÂçöÂÆ¢ üá®üá≥', lang: 'zh' },      // Ï§ëÍµ≠Ïñ¥
			{ text: 'Le Blog de Loutre üá´üá∑', lang: 'fr' } ,   // ÌîÑÎûëÏä§Ïñ¥
			{ text: 'Sj√∏oter‚Äôs Blog üá≥üá¥', lang: 'no' } ,    // ÎÖ∏Î•¥Ïõ®Ïù¥Ïñ¥
		];
		const INTERVAL_DURATION = 10000; // 10Ï¥à
		
		if (!window.__siteTitleState) {
			window.__siteTitleState = {
				currentIndex: 0,
				lastUpdateTime: Date.now(),
				intervalId: null
			};
		}
		
		const state = window.__siteTitleState;
		const now = Date.now();
		const timeSinceLastUpdate = now - state.lastUpdateTime;
		
		// Í≤ΩÍ≥ºÌïú ÏãúÍ∞ÑÎßåÌÅº Ïù∏Îç±Ïä§ ÏßÑÌñâ
		if (timeSinceLastUpdate > 0) {
			const intervalsPassed = Math.floor(timeSinceLastUpdate / INTERVAL_DURATION);
			state.currentIndex = (state.currentIndex + intervalsPassed) % titles.length;
		}

		function applyTitle(titleElement, index) {
			const title = titles[index];
			titleElement.textContent = title.text;
			titleElement.setAttribute('data-lang', title.lang);
		}

		function initTitleRotation() {
			const titleElement = document.getElementById('blog-title-text');
			if (!titleElement) {
				setTimeout(initTitleRotation, 100);
				return;
			}

			// Í∏∞Ï°¥ Ïù∏ÌÑ∞Î≤å Ï†ïÎ¶¨
			if (state.intervalId) {
				clearInterval(state.intervalId);
			}

			applyTitle(titleElement, state.currentIndex);
			titleElement.style.transform = 'translateY(0)';
			titleElement.style.opacity = '1';

			function rotateTitle() {
				titleElement.style.transform = 'translateY(-100%)';
				titleElement.style.opacity = '0';
				
				setTimeout(() => {
					// Îã§Ïùå ÌÖçÏä§Ìä∏Î°ú Î≥ÄÍ≤Ω
					state.currentIndex = (state.currentIndex + 1) % titles.length;
					state.lastUpdateTime = Date.now();
					applyTitle(titleElement, state.currentIndex);
					
					titleElement.style.transform = 'translateY(100%)';
					titleElement.style.opacity = '0';
					
					requestAnimationFrame(() => {
						requestAnimationFrame(() => {
							titleElement.style.transform = 'translateY(0)';
							titleElement.style.opacity = '1';
						});
					});
				}, 250);
			}

			// Îã§Ïùå Î≥ÄÍ≤ΩÍπåÏßÄ ÎÇ®ÏùÄ ÏãúÍ∞Ñ Í≥ÑÏÇ∞
			const timeUntilNextChange = timeSinceLastUpdate >= INTERVAL_DURATION 
				? INTERVAL_DURATION 
				: INTERVAL_DURATION - (timeSinceLastUpdate % INTERVAL_DURATION);
			
			// ÎÇ®ÏùÄ ÏãúÍ∞Ñ ÌõÑ Ï≤´ Î≥ÄÍ≤Ω, Í∑∏ Îã§ÏùåÎ∂ÄÌÑ∞Îäî Ï†ïÍ∏∞Ï†ÅÏúºÎ°ú Î≥ÄÍ≤Ω
			setTimeout(() => {
				rotateTitle();
				state.intervalId = setInterval(rotateTitle, INTERVAL_DURATION);
			}, timeUntilNextChange);
		}

		// DOMÏù¥ Î°úÎìúÎêú ÌõÑ Ïã§Ìñâ
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', initTitleRotation);
		} else {
			initTitleRotation();
		}
	})();
</script>